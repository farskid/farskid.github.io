<meta charset="utf-8" />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>

    
    <meta name="description" content="Before you read this article, read React’s official document on HOCs if you haven’t read it yet.
Pretty much in any React application, you call an API to fetch some data and use them to render some content in your application.

" />
    <meta property="og:description" content="Before you read this article, read React’s official document on HOCs if you haven’t read it yet.
Pretty much in any React application, you call an API to fetch some data and use them to render some content in your application.

" />
    

    <meta name="author" content="Farzad YZ" />

    
    <meta property="og:title" content="Handling loadings in React using Higher Order Components" />
    <meta property="twitter:title" content="Handling loadings in React using Higher Order Components" />
    
<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- <link rel="stylesheet" href="/assets/css/style.css"> -->
  
  <title>Farzad YZ personal blog</title>
  <link rel="icon" href="/images/favicon.png">
</head>

<body>
<main class="l-post">

  <section class="post__header" style="background-image: url(https://unsplash.it/1024/768/?random)">
    <a href="/" class="button button--outline button--white button--small button--rounded">&larr; Back</a>
    <section class="post container">
      <h1 class="post__title">
        Handling loadings in React using Higher Order Components
      </h1>
      <date class="post__date post__date--large">18 Sep 2017</date>
    </section>
  </section>

  <section class="post__body">
    <article class="post container">
      <div class="post__entry">
        <p>Before you read this article, <a href="https://facebook.github.io/react/docs/higher-order-components.html">read React’s official document on HOCs</a> if you haven’t read it yet.
Pretty much in any React application, you call an API to fetch some data and use them to render some content in your application.</p>

<p>Since UI components need to show some kind of progress bar, loading indicator, etc to tell users that data is being fetched, it may be cumbersome to implement loading logic in every single component and to pass a loading property from your redux store or your local state to child components.
In order to make this situation easier, React proposes Higher Order Components to shield away repetitive code snippets and be generic as much as you can.</p>

<h2 id="higher-order-component-hoc">Higher Order Component (HOC)</h2>

<p>A higher order component or HOC as you may face a lot surfing through the web, is a function that accepts your component as an argument and returns a new function that adds some feature to the component. A sharp example of it is the Connect HOC in React-Redux library that makes your store model available as props to your components and containers.</p>

<h2 id="loading-a-list">Loading a List</h2>

<p>For instance, assume we are fetching a list of a developer’s repositories from Github using its open API. We tend to handle list loading so that our clients wouldn’t panic when the API is taking so much time to respond.
A basic List component can be written as:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="s1">'react'</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">List</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">repos</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">props</span><span class="p">;</span>
  
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">repos</span><span class="p">)</span> <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">repos</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="p">(</span><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">No</span> <span class="nx">repos</span><span class="p">,</span> <span class="nx">sorry</span><span class="o">&lt;</span><span class="sr">/p&gt;</span><span class="err">)
</span>  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">ul</span><span class="o">&gt;</span>
      <span class="p">{</span>
        <span class="nx">repos</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">repo</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="k">return</span> <span class="p">(</span>
            <span class="o">&lt;</span><span class="nx">li</span> <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">repo</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">repo</span><span class="p">.</span><span class="nx">full_name</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/li</span><span class="err">&gt;
</span>          <span class="p">)</span>
         <span class="p">})</span>
       <span class="p">}</span>
    <span class="o">&lt;</span><span class="sr">/ul</span><span class="err">&gt;
</span>  <span class="p">)</span>
<span class="p">}</span>
<span class="k">export</span> <span class="k">default</span> <span class="nx">List</span><span class="p">;</span>
</code></pre></div></div>

<p>Now, let’s write the HOC to handle loadings:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="s1">'react'</span><span class="p">;</span>
<span class="kd">function</span> <span class="nx">WithLoading</span><span class="p">(</span><span class="nx">Component</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kd">function</span> <span class="nx">WihLoadingComponent</span><span class="p">({</span> <span class="nx">isLoading</span><span class="p">,</span> <span class="p">...</span><span class="nx">props</span> <span class="p">})</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">isLoading</span><span class="p">)</span> <span class="k">return</span> <span class="p">(</span><span class="o">&lt;</span><span class="nx">Component</span> <span class="p">{...</span><span class="nx">props</span><span class="p">}</span> <span class="sr">/&gt;</span><span class="se">)</span><span class="err">;
</span>    <span class="k">return</span> <span class="p">(</span><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">Be</span> <span class="nx">Hold</span><span class="p">,</span> <span class="nx">fetching</span> <span class="nx">data</span> <span class="nx">may</span> <span class="nx">take</span> <span class="nx">some</span> <span class="nx">time</span> <span class="p">:)</span><span class="o">&lt;</span><span class="sr">/p&gt;</span><span class="se">)</span><span class="err">;
</span>  <span class="p">}</span>
<span class="p">}</span>
<span class="k">export</span> <span class="k">default</span> <span class="nx">WithLoading</span><span class="p">;</span>
</code></pre></div></div>

<p>Now in your container such as App.js , you could easily pass loading logic to WithLoading without being worried about it in your List .
Put it into Action:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="s1">'react'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">List</span> <span class="k">from</span> <span class="s1">'./List.js'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">WithLoading</span> <span class="k">from</span> <span class="s1">'./WithLoading.js'</span><span class="p">;</span>
<span class="kd">class</span> <span class="nx">App</span> <span class="kd">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">state</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">loading</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="na">repos</span><span class="p">:</span> <span class="kc">null</span>
  <span class="p">}</span>
  <span class="nx">componentDidMount</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="na">loading</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
    <span class="nx">fetch</span><span class="p">(</span><span class="s2">`https://api.github.com/users/farskid/repos`</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">json</span> <span class="o">=&gt;</span> <span class="nx">json</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
      <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">repos</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="na">loading</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="na">repos</span><span class="p">:</span> <span class="nx">repos</span> <span class="p">});</span>
      <span class="p">});</span>
  <span class="p">}</span>
  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">ListWithLoading</span> <span class="o">=</span> <span class="nx">WithLoading</span><span class="p">(</span><span class="nx">List</span><span class="p">);</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">ListWithLoading</span> <span class="nx">loading</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">loading</span><span class="p">}</span> <span class="nx">repos</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">repos</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>    <span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="wrap-it-up">Wrap it Up</h2>
<p>we did see that using an HOC really makes it easier to deal with loadings in UI and fades out all those manual if-else statements in every single component that is rendering a data from the API.
Have Fun.</p>

      </div>
    </article>
  </section>

</main>

<div class="container">
  <div class="row post__siblings">
    
      <a class="button button--outline" href="/Hide-browser-default-metas-on-print/">&larr; Hide browsers's default metadata when printing a webpage</a>
    
    
      <a class="button button--outline" href="/3-ways-to-clone-objects-in-javascript/">3 Ways to clone objects in Javascript &rarr;</a>
    
  </div>
</div>

<section class="post__footer container">
  <div class="row">
    <div class="col--3 text--center">
      <div class="hero__avatar avatar avatar--circle"></div>
    </div>
    <div class="col--9">
      <h3 class="post__footer__title">Farzad YZ</h3>
      <p class="post__footer__entry">
        Javascript enthusiast, blogger, astronomer
      </p>
      <a href="/about" class="button button--fill button--small button--rounded">More about me</a>
    </div>
  </div>
</section>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-104117544-1', 'auto');
  ga('send', 'pageview');

</script>
<script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
<script>
  WebFont.load({
    google: {
      families: ['Open Sans Condensed:300,300italic,700', 'Merriweather:300,300italic,400,italic,700,700italic', 'Open Sans:300,300italic,400,italic,600,600italic,700,700italic', 'Overpass Mono']
    }
  });

</script>
 <script src="/assets/site-1778c2a687e031eca121a38276054984eee6654585660db2bff6a212665d5341.js" type="text/javascript"></script>
</body>

</html>