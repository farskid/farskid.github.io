<meta charset="utf-8" />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>

    
    <meta name="description" content="Not all the components you write for your react application can be divided into Stateful and Stateless (dumb) categories. There is a 3rd yet advanced type of components in React that are called Higher order components. If you don’t know about them yet, you can always refer to the documentation and to see them in real world action, I’ve already wrote about them here.

" />
    <meta property="og:description" content="Not all the components you write for your react application can be divided into Stateful and Stateless (dumb) categories. There is a 3rd yet advanced type of components in React that are called Higher order components. If you don’t know about them yet, you can always refer to the documentation and to see them in real world action, I’ve already wrote about them here.

" />
    

    <meta name="author" content="Farzad YZ" />

    
    <meta property="og:title" content="Unit testing Higher Order Components using Enzyme" />
    <meta property="twitter:title" content="Unit testing Higher Order Components using Enzyme" />
    
<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- <link rel="stylesheet" href="/assets/css/style.css"> -->
  
  <title>Farzad YZ personal blog</title>
  <link rel="icon" href="/images/favicon.png">
</head>

<body>
<main class="l-post">

  <section class="post__header" style="background-image: url(https://unsplash.it/1024/768/?random)">
    <a href="/" class="button button--outline button--white button--small button--rounded">&larr; Back</a>
    <section class="post container">
      <h1 class="post__title">
        Unit testing Higher Order Components using Enzyme
      </h1>
      <date class="post__date post__date--large">03 Nov 2017</date>
    </section>
  </section>

  <section class="post__body">
    <article class="post container">
      <div class="post__entry">
        <p>Not all the components you write for your react application can be divided into Stateful and Stateless (dumb) categories. There is a 3rd yet advanced type of components in React that are called <em>Higher order components</em>. If you don’t know about them yet, you can always refer to the <a href="https://reactjs.org/docs/higher-order-components.html">documentation</a> and to see them in real world action, <a href="http://farzadyz.com/Handling-lodings-in-react-using-higher-order-components/">I’ve already wrote about them here</a>.</p>

<h2 id="get-to-the-point">Get to the point</h2>

<p>The point of this piece of writing is to demonstrate how to unit test these Higher Order Components. For the purpose of this article, I suggest using <a href="https://github.com/airbnb/enzyme">Enzyme</a> and <a href="https://facebook.github.io/jest/">Jest</a>, but feel free to use whatever library that suits you.</p>

<p>One of the common HOCs I write for every project of mine is called <strong>withConditional</strong>. It’s simply supposed to render a component if and only if the condition passes, otherwise just return a null object.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="s1">'react'</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">withConditional</span> <span class="o">=</span> <span class="nx">Component</span> <span class="o">=&gt;</span>
  <span class="kd">function</span> <span class="nx">withConditionalComponent</span><span class="p">({</span> <span class="nx">condition</span><span class="p">,</span> <span class="p">...</span><span class="nx">props</span> <span class="p">})</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">condition</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="o">&lt;</span><span class="nx">Component</span> <span class="p">{...</span><span class="nx">props</span><span class="p">}</span> <span class="sr">/&gt;</span><span class="err">;
</span>    <span class="p">}</span>
    <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span>
<span class="k">export</span> <span class="k">default</span> <span class="nx">withConditional</span><span class="p">;</span>
</code></pre></div></div>

<p>As you can see, when the <em>condition</em> passed to the HOC, fulfills, it returns the component, otherwise just returns <em>null</em>.</p>

<p>So how to unit test the HOC? There are surprisingly less than a few articles talking about unit testing them, and I had a hard time figuring out the proper way. Recently the solution just clicked!</p>

<h2 id="solution">Solution</h2>

<p>To properly test these badass components, you just need to know that they are <strong>simple stupid functions</strong> and that’s all! So we can treat them as plain functions that wrap our components and decorate them. The way we use them is like:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">ConditionalComponent</span> <span class="o">=</span> <span class="nx">withConditional</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">MyComponent</span> <span class="o">/&gt;</span><span class="p">);</span>
<span class="kd">class</span> <span class="nx">HelloWorld</span> <span class="kd">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="o">&lt;</span><span class="nx">ConditionalComponent</span> <span class="nx">condition</span><span class="o">=</span><span class="p">{</span><span class="mi">3</span> <span class="o">&gt;</span> <span class="mi">4</span><span class="p">}</span> <span class="sr">/&gt;</span><span class="se">)</span><span class="err">;
</span>  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>So we should use the exact same way to unit test them as well.</p>

<p>The important thing to take into account here is that always test them for all states. For instance, if our HOC can handle two different states, depending on the condition passed to it, then we MUST test for both states.</p>

<h3 id="when-condition-passes">When condition passes:</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">it</span><span class="p">(</span>
  <span class="s1">'should render the component only when the condition passes'</span>
  <span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">ConditionalComponent</span> <span class="o">=</span> <span class="nx">withConditional</span><span class="p">(</span><span class="nx">Component</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">wrapper</span> <span class="o">=</span> <span class="nx">shallow</span><span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">ConditionalComponent</span> <span class="nx">condition</span><span class="o">=</span><span class="p">{</span><span class="kc">true</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>  <span class="p">);</span>
  <span class="nx">expect</span><span class="p">(</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">html</span><span class="p">()).</span><span class="nx">not</span><span class="p">.</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<h3 id="when-condition-fails">When condition fails:</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">it</span><span class="p">(</span>
  <span class="s1">'should return null when the condition fails'</span>
  <span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
<span class="kd">const</span> <span class="nx">ConditionalComponent</span> <span class="o">=</span> <span class="nx">withConditional</span><span class="p">(</span><span class="nx">Component</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">wrapper</span> <span class="o">=</span> <span class="nx">shallow</span><span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">ConditionalComponent</span> <span class="nx">condition</span><span class="o">=</span><span class="p">{</span><span class="kc">false</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="nx">expect</span><span class="p">(</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">html</span><span class="p">()).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<h2 id="wrap-up">Wrap Up</h2>

<p>I hope this article helps you as well, since it was very usefull for me to look at the way I need to actually implement my unit tests on these components.</p>

<p>Have fun and test it up.</p>

      </div>
    </article>
  </section>

</main>

<div class="container">
  <div class="row post__siblings">
    
      <a class="button button--outline" href="/3-ways-to-clone-objects-in-javascript/">&larr; 3 Ways to clone objects in Javascript</a>
    
    
  </div>
</div>

<section class="post__footer container">
  <div class="row">
    <div class="col--3 text--center">
      <div class="hero__avatar avatar avatar--circle"></div>
    </div>
    <div class="col--9">
      <h3 class="post__footer__title">Farzad YZ</h3>
      <p class="post__footer__entry">
        Javascript enthusiast, blogger, astronomer
      </p>
      <a href="/about" class="button button--fill button--small button--rounded">More about me</a>
    </div>
  </div>
</section>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-104117544-1', 'auto');
  ga('send', 'pageview');

</script>
<script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
<script>
  WebFont.load({
    google: {
      families: ['Open Sans Condensed:300,300italic,700', 'Merriweather:300,300italic,400,italic,700,700italic', 'Open Sans:300,300italic,400,italic,600,600italic,700,700italic', 'Overpass Mono']
    }
  });

</script>
 <script src="/assets/site-1778c2a687e031eca121a38276054984eee6654585660db2bff6a212665d5341.js" type="text/javascript"></script>
</body>

</html>